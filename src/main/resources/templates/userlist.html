<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>用户管理</title>
    <link type="text/css" rel="stylesheet" th:href="@{/css/style.css}"/>
    <link type="text/css" rel="stylesheet" th:href="@{/css/public.css}"/>
</head>
<body>

<div th:replace="head :: html"></div>  <!-- 插入head.html文件 ,注意：号前后有个空格-->
<div class="right">
    <div class="location">
        <strong>你现在所在的位置是:</strong>
        <span>用户管理页面</span>
    </div>
    <div class="search">
        <form method="post" th:action="@{/userlist}">
            <input name="method" value="query" class="input-text" type="hidden">
            <label>
                <span>用户名：</span>
                <input name="queryUserName" class="input-text" type="text" th:value="${queryUserName}">
            </label>
            <label>
                <span>用户角色：</span>
                <select name="queryUserRole" th:if="${roleList!=null}">
                    <option value="0">--请选择--</option>
                    <option th:each="role:${roleList}"
                            th:text="${role.roleName}"
                            th:value="${role.id}"
                            th:selected="${role.id} eq ${queryUserRole}"></option>
                </select>
            </label>

            <input type="hidden" name="pageNum" value="1"/>
            <input value="查 询" type="submit" id="searchbutton">
            <a href="/useradd">添加用户</a>
        </form>
    </div>
    <!--用户-->
    <table class="providerTable" cellpadding="0" cellspacing="0">
        <tr class="firstTr">
            <th width="10%">用户编码</th>
            <th width="20%">用户名称</th>
            <th width="10%">性别</th>
            <th width="20%">电话</th>
            <th width="10%">用户角色</th>
            <th width="30%">操作</th>
        </tr>
        <tr th:each="user:${pageInfo.list}"> <!--读取后端传来的用户信息 记得加.list-->
            <td>
                <span th:text="${user.userCode}"/>
            </td>
            <td>
                <span th:text="${user.userName}"/>
            </td>
            <td>
                <span th:if="${user.gender==1}">男</span>
                <span th:if="${user.gender==2}">女</span>
            </td>
            <td>
                <span th:text="${user.phone}"/>
            </td>
            <td>
                <span th:text="${user.role.roleName}"/>
            </td>
            <td>
                <span>
                    <a class="viewUser" href="javascript:" th:userid="${user.id}" th:username="${user.userName}">
                        <img th:src="@{/images/read.png}" alt="查看" title="查看"/>
                    </a>
                </span>
                <span>
                    <a class="modifyUser" href="javascript:" th:userid="${user.id}" th:username="${user.userName}">
                        <img th:src="@{/images/xiugai.png}" alt="修改" title="修改"/>
                    </a>
                </span>
                <span>
                    <a class="deleteUser" href="javascript:" th:userid="${user.id}" th:username="${user.userName}">
                        <img th:src="@{/images/schu.png}" alt="删除" title="删除"/>
                    </a>
                </span>
            </td>
        </tr>
        </c:forEach>
    </table>
    <!-- 用控件分页-->
    <div class="page-bar">
        <p>当前
            <span th:text="${pageInfo.pageNum}"></span> 页,总
            <span th:text="${pageInfo.pages}"></span> 页,共
            <span id="totalPageCount" name="totalPageCount" th:text="${pageInfo.total}"></span>
            条记录
        </p>
        <a th:href="@{/userlist}">首页</a>
        <a th:href="@{/userlist(pageNum=${pageInfo.hasPreviousPage}?${pageInfo.prePage}:1)}">上一页</a>
        <a th:href="@{/userlist(pageNum=${pageInfo.hasNextPage}?${pageInfo.nextPage}:${pageInfo.pages})}">下一页</a>
        <a th:href="@{/userlist(pageNum=${pageInfo.pages})}">尾页</a>

        <span class="page-go-form">
            <label>
                跳转至
                <input type="text" name="inputPage" id="inputPage" class="page-key"/>页
            </label>
            <button type="button" class="page-btn"
                    onClick='jump_to(document.forms[0],document.getElementById("inputPage").value)'>GO</button>
        </span>

    </div>

</div>
</section>

<!--点击删除按钮后弹出的页面-->
<div class="zhezhao"></div>
<div class="remove" id="removeUse">
    <div class="removerChid">
        <h2>提示</h2>
        <div class="removeMain">
            <p>你确定要删除该用户吗？</p>
            <a href="#" id="yes">确定</a>
            <a href="#" id="no">取消</a>
        </div>
    </div>
</div>

<div th:replace="foot :: html"></div>  <!--插入foot.html文件,注意：号前后有个空格-->
<script type="text/javascript" th:src="@{js/userlist.js}"></script>
<script type="text/javascript" th:src="@{js/rollpage.js}"></script>
</body>
</html>
